[gcode_macro CENTER_NOZZLE]
gcode:
    # --- Determine Boundaries (Custom Variable or Physical Limits) ---
    # Check for _CLIENT_VARIABLE to get user-defined print area limits
    {% set CLIENT_VARS = printer['gcode_macro _CLIENT_VARIABLE'] | default({}) %}

    # Use custom max X if set, otherwise use Klipper's physical max
    {% set x_max = CLIENT_VARS.get('variable_print_area_max_x', printer.toolhead.axis_maximum.x) | float %}
    
    # Use custom max Y if set, otherwise use Klipper's physical max
    {% set y_max = CLIENT_VARS.get('variable_print_area_max_y', printer.toolhead.axis_maximum.y) | float %}

    # Use custom min X if set, otherwise default to 0
    {% set x_min = CLIENT_VARS.get('variable_print_area_min_x', 0) | float %}
    
    # Use custom min Y if set, otherwise default to 0
    {% set y_min = CLIENT_VARS.get('variable_print_area_min_y', 0) | float %}

    # --- Calculate Center ---
    {% set center_x = (x_max + x_min) / 2 %}
    {% set center_y = (y_max + y_min) / 2 %}

    # --- Move Command ---
    # Get the travel speed from stepper_x or use a default of 50 mm/s
    {% set travel_speed = printer.configfile.settings.stepper_x.homing_speed|default(50) %}
    
    G0 X{center_x} Y{center_y} F{travel_speed * 60}

[gcode_macro CENTER_PROBE]
gcode:
    # --- Determine Boundaries (Custom Variable or Physical Limits) ---
    # Check for _CLIENT_VARIABLE to get user-defined print area limits
    {% set CLIENT_VARS = printer['gcode_macro _CLIENT_VARIABLE'] | default({}) %}

    # Use custom max X if set, otherwise use Klipper's physical max
    {% set x_max = CLIENT_VARS.get('variable_print_area_max_x', printer.toolhead.axis_maximum.x) | float %}
    
    # Use custom max Y if set, otherwise use Klipper's physical max
    {% set y_max = CLIENT_VARS.get('variable_print_area_max_y', printer.toolhead.axis_maximum.y) | float %}

    # Use custom min X if set, otherwise default to 0
    {% set x_min = CLIENT_VARS.get('variable_print_area_min_x', 0) | float %}
    
    # Use custom min Y if set, otherwise default to 0
    {% set y_min = CLIENT_VARS.get('variable_print_area_min_y', 0) | float %}

    # --- Get Probe Offsets and Travel Speed ---
    # Get the probe offsets from the probe section
    {% set probe_x_offset = printer.configfile.settings.probe.x_offset|default(0) | float %}
    {% set probe_y_offset = printer.configfile.settings.probe.y_offset|default(0) | float %}

    # Get the travel speed from stepper_x or use a default of 50 mm/s
    {% set travel_speed = printer.configfile.settings.stepper_x.homing_speed|default(50) %}

    # --- Calculate Probe Target ---
    # Calculate the center coordinates for the **Target Area**
    {% set center_x = (x_max + x_min) / 2 %}
    {% set center_y = (y_max + y_min) / 2 %}

    # Calculate the NOZZLE position needed to place the PROBE at the center
    {% set probe_center_x = center_x - probe_x_offset %}
    {% set probe_center_y = center_y - probe_y_offset %}

    # --- Move Command ---
    G0 X{probe_center_x} Y{probe_center_y} F{travel_speed * 60}
